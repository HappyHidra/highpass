"use strict";

//  Search window
var search = document.querySelector(".header-search__item"),
  searchWindow = document.querySelector(".search-window"),
  searchBtn = document.querySelector(".search-window__submit-btn"),
  inputResult = document.querySelector(".search-window__descr");
search.addEventListener("click", function () {
  search.classList.toggle("header-search__item_active"), searchWindow.classList.toggle("search-window_active");
});
searchBtn.addEventListener("click", function (e) {
  e.preventDefault(), inputResult.value = "", search.classList.toggle("header-search__item_active"), searchWindow.classList.toggle("search-window_active");
});
inputResult.addEventListener("click", function (e) {
  e.preventDefault(), inputResult.removeAttribute("placeholder");
});
inputResult.addEventListener("blur", function (e) {
  e.preventDefault(), inputResult.setAttribute("placeholder", "Что будем искать");
});

// Input Errors
var errors = {};
var inputForm = document.querySelector(".about__form");
var aboutInput = document.querySelector(".about__input");
var errorsEl = document.querySelector(".errors");

//  1 form
inputForm.addEventListener("submit", function (e) {
  e.preventDefault();
  var inputValue = aboutInput.value;
  if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(inputValue)) {
    delete errors.sendEmail;
    aboutInput.classList.remove("is-invalid");
    errorsEl.style.display = "none";
  } else {
    errors.sendEmail = "Недопустимый формат";
    aboutInput.classList.add("is-invalid");
    errorsEl.style.display = "block";
    errorsEl.textContent = errors.sendEmail;
  }
});
aboutInput.addEventListener("input", function (e) {
  errorsEl.style.display = "none";
  aboutInput.classList.remove("is-invalid");
});

//  2 form
var contactsForm = document.querySelector(".contacts__form");
var contactsInput = document.querySelector(".contacts__inp_mail");
var errors2El = document.querySelector(".errors2");
contactsForm.addEventListener("submit", function (e) {
  e.preventDefault();
  var inputValue = contactsInput.value;
  if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(inputValue)) {
    delete errors.contactsEmail;
    contactsInput.classList.remove("is-invalid");
    errors2El.style.display = "none";
  } else {
    errors.contactsEmail = "Недопустимый формат";
    contactsInput.classList.add("is-invalid");
    errors2El.style.display = "block";
    errors2El.textContent = errors.contactsEmail;
  }
});
contactsInput.addEventListener("input", function (e) {
  errors2El.style.display = "none";
  contactsInput.classList.remove("is-invalid");
});

// Burger
var burger = document.querySelector(".burger"),
  menu = document.querySelector(".header-nav__menu_small"),
  menuLinks = document.querySelectorAll(".nav-menu__item"),
  closeBtn = document.querySelector(".burger-search__item_close");
closeBtn.addEventListener("click", function () {
  burger.style.display = "block";
  closeBtn.style.display = "none";
  menu.classList.remove("header__menu_active"), document.body.classList.remove("stop-scroll");
});
burger.addEventListener("click", function () {
  // burger.classList.toggle("burger_active"),
  burger.style.display = "none";
  closeBtn.style.display = "block";
  menu.classList.toggle("header__menu_active"), document.body.classList.toggle("stop-scroll");
}), menuLinks.forEach(function (e) {
  e.addEventListener("click", function () {
    // burger.classList.remove("burger_active"),
    burger.style.display = "block";
    closeBtn.style.display = "none";
    menu.classList.remove("header__menu_active"), document.body.classList.remove("stop-scroll");
  });
});

//  Map
document.getElementById("map").addEventListener("click", function (e) {
  e.preventDefault();
  document.querySelector(".contacts__desc").classList.toggle("contacts__desc_active");
});
document.querySelector(".contacts__close").addEventListener("click", function (e) {
  e.preventDefault();
  document.querySelector(".contacts__desc").classList.remove("contacts__desc_active");
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic2VhcmNoIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2VhcmNoV2luZG93Iiwic2VhcmNoQnRuIiwiaW5wdXRSZXN1bHQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZSIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJlcnJvcnMiLCJpbnB1dEZvcm0iLCJhYm91dElucHV0IiwiZXJyb3JzRWwiLCJpbnB1dFZhbHVlIiwidGVzdCIsInNlbmRFbWFpbCIsInJlbW92ZSIsInN0eWxlIiwiZGlzcGxheSIsImFkZCIsInRleHRDb250ZW50IiwiY29udGFjdHNGb3JtIiwiY29udGFjdHNJbnB1dCIsImVycm9yczJFbCIsImNvbnRhY3RzRW1haWwiLCJidXJnZXIiLCJtZW51IiwibWVudUxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImNsb3NlQnRuIiwiYm9keSIsImZvckVhY2giLCJnZXRFbGVtZW50QnlJZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBLElBQU1BLE1BQU0sR0FBR0MsUUFBUSxDQUFDQyxhQUFhLENBQUMsc0JBQXNCLENBQUM7RUFDM0RDLFlBQVksR0FBR0YsUUFBUSxDQUFDQyxhQUFhLENBQUMsZ0JBQWdCLENBQUM7RUFDdkRFLFNBQVMsR0FBR0gsUUFBUSxDQUFDQyxhQUFhLENBQUMsNEJBQTRCLENBQUM7RUFDaEVHLFdBQVcsR0FBR0osUUFBUSxDQUFDQyxhQUFhLENBQUMsdUJBQXVCLENBQUM7QUFFL0RGLE1BQU0sQ0FBQ00sZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFlBQU07RUFDckNOLE1BQU0sQ0FBQ08sU0FBUyxDQUFDQyxNQUFNLENBQUMsNEJBQTRCLENBQUMsRUFDbkRMLFlBQVksQ0FBQ0ksU0FBUyxDQUFDQyxNQUFNLENBQUMsc0JBQXNCLENBQUM7QUFDekQsQ0FBQyxDQUFDO0FBRUZKLFNBQVMs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QUMsQ0FBQ0ksZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQUNHLENBQUMsRUFBSztFQUMxRUEsQ0FBQyxDQUFDQyxjQUFjLENBQUMsQ0FBQztFQUNsQlQsUUFBUSxDQUNMQyxhQUFhLENBQUMsaUJBQWlCLENBQUMsQ0FDaENLLFNBQVMsQ0FBQ2MsTUFBTSxDQUFDLHVCQUF1QixDQUFDO0FBQzlDLENBQUMsQ0FBQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgU2VhcmNoIHdpbmRvd1xuY29uc3Qgc2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXItc2VhcmNoX19pdGVtXCIpLFxuICBzZWFyY2hXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC13aW5kb3dcIiksXG4gIHNlYXJjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLXdpbmRvd19fc3VibWl0LWJ0blwiKSxcbiAgaW5wdXRSZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC13aW5kb3dfX2Rlc2NyXCIpO1xuXG5zZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgc2VhcmNoLmNsYXNzTGlzdC50b2dnbGUoXCJoZWFkZXItc2VhcmNoX19pdGVtX2FjdGl2ZVwiKSxcbiAgICBzZWFyY2hXaW5kb3cuY2xhc3NMaXN0LnRvZ2dsZShcInNlYXJjaC13aW5kb3dfYWN0aXZlXCIpO1xufSk7XG5cbnNlYXJjaEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpLFxuICAgIChpbnB1dFJlc3VsdC52YWx1ZSA9IFwiXCIpLFxuICAgIHNlYXJjaC5jbGFzc0xpc3QudG9nZ2xlKFwiaGVhZGVyLXNlYXJjaF9faXRlbV9hY3RpdmVcIiksXG4gICAgc2VhcmNoV2luZG93LmNsYXNzTGlzdC50b2dnbGUoXCJzZWFyY2gtd2luZG93X2FjdGl2ZVwiKTtcbn0pO1xuXG5pbnB1dFJlc3VsdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpLCBpbnB1dFJlc3VsdC5yZW1vdmVBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiKTtcbn0pO1xuaW5wdXRSZXN1bHQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpLFxuICAgIGlucHV0UmVzdWx0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwi0KfRgtC+INCx0YPQtNC10Lwg0LjRgdC60LDRgtGMXCIpO1xufSk7XG5cbi8vIElucHV0IEVycm9yc1xuY29uc3QgZXJyb3JzID0ge307XG5cbmNvbnN0IGlucHV0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWJvdXRfX2Zvcm1cIik7XG5jb25zdCBhYm91dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hYm91dF9faW5wdXRcIik7XG5jb25zdCBlcnJvcnNFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JzXCIpO1xuXG4vLyAgMSBmb3JtXG5pbnB1dEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGlucHV0VmFsdWUgPSBhYm91dElucHV0LnZhbHVlO1xuICBpZiAoL15cXHcrKFtcXC4tXT9cXHcrKSpAXFx3KyhbXFwuLV0/XFx3KykqKFxcLlxcd3syLDN9KSskLy50ZXN0KGlucHV0VmFsdWUpKSB7XG4gICAgZGVsZXRlIGVycm9ycy5zZW5kRW1haWw7XG4gICAgYWJvdXRJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtaW52YWxpZFwiKTtcbiAgICBlcnJvcnNFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gZWxzZSB7XG4gICAgZXJyb3JzLnNlbmRFbWFpbCA9IFwi0J3QtdC00L7Qv9GD0YHRgtC40LzRi9C5INGE0L7RgNC80LDRglwiO1xuICAgIGFib3V0SW5wdXQuY2xhc3NMaXN0LmFkZChcImlzLWludmFsaWRcIik7XG4gICAgZXJyb3JzRWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICBlcnJvcnNFbC50ZXh0Q29udGVudCA9IGVycm9ycy5zZW5kRW1haWw7XG4gIH1cbn0pO1xuXG5hYm91dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICBlcnJvcnNFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIGFib3V0SW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImlzLWludmFsaWRcIik7XG59KTtcblxuLy8gIDIgZm9ybVxuY29uc3QgY29udGFjdHNGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250YWN0c19fZm9ybVwiKTtcbmNvbnN0IGNvbnRhY3RzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3RzX19pbnBfbWFpbFwiKTtcbmNvbnN0IGVycm9yczJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JzMlwiKTtcblxuY29udGFjdHNGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlID0gY29udGFjdHNJbnB1dC52YWx1ZTtcbiAgaWYgKC9eXFx3KyhbXFwuLV0/XFx3KykqQFxcdysoW1xcLi1dP1xcdyspKihcXC5cXHd7MiwzfSkrJC8udGVzdChpbnB1dFZhbHVlKSkge1xuICAgIGRlbGV0ZSBlcnJvcnMuY29udGFjdHNFbWFpbDtcbiAgICBjb250YWN0c0lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1pbnZhbGlkXCIpO1xuICAgIGVycm9yczJFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0gZWxzZSB7XG4gICAgZXJyb3JzLmNvbnRhY3RzRW1haWwgPSBcItCd0LXQtNC+0L/Rg9GB0YLQuNC80YvQuSDRhNC+0YDQvNCw0YJcIjtcbiAgICBjb250YWN0c0lucHV0LmNsYXNzTGlzdC5hZGQoXCJpcy1pbnZhbGlkXCIpO1xuICAgIGVycm9yczJFbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIGVycm9yczJFbC50ZXh0Q29udGVudCA9IGVycm9ycy5jb250YWN0c0VtYWlsO1xuICB9XG59KTtcblxuY29udGFjdHNJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgZXJyb3JzMkVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgY29udGFjdHNJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtaW52YWxpZFwiKTtcbn0pO1xuXG4vLyBCdXJnZXJcbmNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpLFxuICBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXItbmF2X19tZW51X3NtYWxsXCIpLFxuICBtZW51TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdi1tZW51X19pdGVtXCIpLFxuICBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyLXNlYXJjaF9faXRlbV9jbG9zZVwiKTtcblxuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYnVyZ2VyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIGNsb3NlQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgbWVudS5jbGFzc0xpc3QucmVtb3ZlKFwiaGVhZGVyX19tZW51X2FjdGl2ZVwiKSxcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJzdG9wLXNjcm9sbFwiKTtcbn0pO1xuXG5idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgLy8gYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJidXJnZXJfYWN0aXZlXCIpLFxuICBidXJnZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBjbG9zZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJoZWFkZXJfX21lbnVfYWN0aXZlXCIpLFxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcInN0b3Atc2Nyb2xsXCIpO1xufSksXG4gIG1lbnVMaW5rcy5mb3JFYWNoKChlKSA9PiB7XG4gICAgZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgLy8gYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoXCJidXJnZXJfYWN0aXZlXCIpLFxuICAgICAgYnVyZ2VyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBjbG9zZUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJoZWFkZXJfX21lbnVfYWN0aXZlXCIpLFxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJzdG9wLXNjcm9sbFwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbi8vICBNYXBcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGFjdHNfX2Rlc2NcIilcbiAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNvbnRhY3RzX19kZXNjX2FjdGl2ZVwiKTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3RzX19jbG9zZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRhY3RzX19kZXNjXCIpXG4gICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250YWN0c19fZGVzY19hY3RpdmVcIik7XG59KTtcbiJdfQ==
